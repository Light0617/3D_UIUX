//////////////////////////////////////////////////////////////////////////////////////////////////////
./clearproject;
//////////////////////////////////////////////////////////////////////////////////////////////////////
openserver 1330;
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
sub gesture_expand(
   with c:focus do (
      expandgroup #groupname;
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
sub gesture_collapse(
   with c:focus do (
      collapsegroup #groupname;
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
// c:name <-- name of the node
sub declareFolder(
   with node:(c:name) do (
      itemsize 7.0; 
      itemchasesize 15.0;
      itemtexture name "textures/folderopen.gif";
      isfolder <<# true;
      groupname <<# c:name;
      #groupname <<group: (node:c:name);
      nodelabel c:shortname;
      itemcolor rgb:80 80 20;
      itemflashcolor rgb:250 0 0;
      
      with groupleader: #groupname do (
         itemsize 7.0; 
         itemchasesize 15.0;
         itemtexture name "textures/folderclose.gif";
         
         nodelabel c:shortname;
         itemcolor rgb:149 20 20;
         itemflashcolor rgb:250 0 0;
         
         itemgesture r9 gesture_expand "expand group";
         
      ) end;
      
      itemgesture r46 gesture_collapse "collapse group";               
      
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
// c:name <-- name of the node
sub declareCode(
   with node:(c:name) do (
      itemsize 3.0; 
      itemchasesize 7.0;
      itemtexture name "textures/file.gif";
      isfolder <<# false;
      nodelabel c:shortname;
      itemcolor rgb:20 90 20;
      itemflashcolor rgb:250 0 0;
      
      itemgesture r46 gesture_collapse "collapse group";  
      
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
// c:name <-- name of the node
sub declareHeader(
   with node:(c:name) do (
      itemsize 3.0; 
      itemchasesize 7.0;
      itemtexture name "textures/file.gif";
      isfolder <<# false;
      nodelabel c:shortname;
      itemcolor rgb:20 20 90;
      itemflashcolor rgb:250 0 0;
      
      itemgesture r46 gesture_collapse "collapse group";  
      
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
sub declareParentChild(
   with (c:parent -- parentof -> c:child) do (
      itemtexture name "textures/holedarrow.gif";
      itemcolor rgb:20 20 20;
      itemflashcolor rgb:250 250 0;
      itemdkcolor rgb: 20 20 20;
      itemdarkflashcolor rgb:250 250 0;
      itemsize 4.0;
      itemchasesize 14.0;
      pullstrength 3.0;
      
      if (c:child::#isfolder == false) then (
         
         ((node:c:parent)::#groupname) <<group: (node:c:child);
         with node:c:child do (
            groupname <<# (c:parent::#groupname);
         ) end;
         
      ) end;
      
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////
sub declareInclusion(
   with (c:includer -- includes -> c:includee) do (
      itemtexture name "textures/holedarrow.gif";
      itemcolor rgb:00 130 00;
      itemflashcolor rgb:250 250 0;
      itemdkcolor rgb: 00 00 130;
      itemdarkflashcolor rgb:250 250 250;
      itemsize 2.0;
      itemchasesize 14.0;
      pullstrength 0.3;
   ) end;
);
//////////////////////////////////////////////////////////////////////////////////////////////////////

g_activecounter = 400000;
g_pull = 0.05; 
g_globeness = 0.0005; 
g_diameter = 1.0;

//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////

